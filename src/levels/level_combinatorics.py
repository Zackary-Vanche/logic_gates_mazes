from Switch import Switch
from Tree import Tree
from Door import Door
from Room import Room
from Maze import Maze
from Levels_colors_list import Levels_colors_list
from Color import Color

def level_combinatorics(fast_solution_finding=False):

    S0 = Switch(name='S0')
    S1 = Switch(name='S1')
    S2 = Switch(name='S2')
    S3 = Switch(name='S3')
    S4 = Switch(name='S4')
    S5 = Switch(name='S5')
    S6 = Switch(name='S6')
    S7 = Switch(name='S7')
    S8 = Switch(name='S8')
    S9 = Switch(name='S9')
    S10 = Switch(name='S10')
    S11 = Switch(name='S11')
    S12 = Switch(name='S12')
    S13 = Switch(name='S13')
    S14 = Switch(name='S14')
    S15 = Switch(name='S15')
    S16 = Switch(name='S16')
    S17 = Switch(name='S17')
    S18 = Switch(name='S18')
    S19 = Switch(name='S19')
    S20 = Switch(name='S20')
    S21 = Switch(name='S21')
    S22 = Switch(name='S22')
    S23 = Switch(name='S23')
    S24 = Switch(name='S24')
    S25 = Switch(name='S25')
    S26 = Switch(name='S26')
    S27 = Switch(name='S27')
    S28 = Switch(name='S28')
    S29 = Switch(name='S29')
    S30 = Switch(name='S30')
    S31 = Switch(name='S31')
    S32 = Switch(name='S32')
    S33 = Switch(name='S33')
    S34 = Switch(name='S34')
    S35 = Switch(name='S35')
    S36 = Switch(name='S36')
    S37 = Switch(name='S37')
    S38 = Switch(name='S38')
    S39 = Switch(name='S39')
    S40 = Switch(name='S40')
    S41 = Switch(name='S41')
    S42 = Switch(name='S42')
    S43 = Switch(name='S43')
    S44 = Switch(name='S44')
    S45 = Switch(name='S45')
    S46 = Switch(name='S46')
    S47 = Switch(name='S47')
    S48 = Switch(name='S48')
    S49 = Switch(name='S49')
    S50 = Switch(name='S50')
    S51 = Switch(name='S51')
    S52 = Switch(name='S52')
    S53 = Switch(name='S53')
    S54 = Switch(name='S54')
    S55 = Switch(name='S55')
    S56 = Switch(name='S56')
    S57 = Switch(name='S57')
    S58 = Switch(name='S58')
    S59 = Switch(name='S59')
    S60 = Switch(name='S60')
    S61 = Switch(name='S61')
    S62 = Switch(name='S62')
    S63 = Switch(name='S63')
    S64 = Switch(name='S64')
    S65 = Switch(name='S65')
    S66 = Switch(name='S66')
    S67 = Switch(name='S67')
    S68 = Switch(name='S68')
    S69 = Switch(name='S69')
    S70 = Switch(name='S70')
    S71 = Switch(name='S71')
    S72 = Switch(name='S72')
    S73 = Switch(name='S73')
    S74 = Switch(name='S74')
    S75 = Switch(name='S75')
    S76 = Switch(name='S76')
    S77 = Switch(name='S77')
    S78 = Switch(name='S78')
    S79 = Switch(name='S79')
    S80 = Switch(name='S80')
    S81 = Switch(name='S81')
    S82 = Switch(name='S82')
    S83 = Switch(name='S83')
    S84 = Switch(name='S84')
    S85 = Switch(name='S85')
    S86 = Switch(name='S86')
    S87 = Switch(name='S87')
    S88 = Switch(name='S88')
    S89 = Switch(name='S89')
    S90 = Switch(name='S90')
    S91 = Switch(name='S91')
    S92 = Switch(name='S92')
    S93 = Switch(name='S93')
    S94 = Switch(name='S94')
    S95 = Switch(name='S95')
    S96 = Switch(name='S96')
    S97 = Switch(name='S97')
    S98 = Switch(name='S98')
    S99 = Switch(name='S99')
    S100 = Switch(name='S100')
    S101 = Switch(name='S101')
    S102 = Switch(name='S102')
    S103 = Switch(name='S103')
    S104 = Switch(name='S104')
    S105 = Switch(name='S105')
    S106 = Switch(name='S106')
    S107 = Switch(name='S107')
    S108 = Switch(name='S108')
    S109 = Switch(name='S109')
    S110 = Switch(name='S110')
    S111 = Switch(name='S111')
    S112 = Switch(name='S112')
    S113 = Switch(name='S113')
    S114 = Switch(name='S114')
    S115 = Switch(name='S115')
    S116 = Switch(name='S116')
    S117 = Switch(name='S117')
    S118 = Switch(name='S118')
    S119 = Switch(name='S119')
    S120 = Switch(name='S120')
    S121 = Switch(name='S121')
    S122 = Switch(name='S122')
    S123 = Switch(name='S123')
    S124 = Switch(name='S124')
    S125 = Switch(name='S125')
    S126 = Switch(name='S126')
    S127 = Switch(name='S127')
    S128 = Switch(name='S128')
    S129 = Switch(name='S129')
    S130 = Switch(name='S130')
    S131 = Switch(name='S131')
    S132 = Switch(name='S132')
    S133 = Switch(name='S133')
    S134 = Switch(name='S134')
    S135 = Switch(name='S135')
    S136 = Switch(name='S136')
    S137 = Switch(name='S137')
    S138 = Switch(name='S138')
    S139 = Switch(name='S139')
    S140 = Switch(name='S140')
    S141 = Switch(name='S141')
    S142 = Switch(name='S142')
    S143 = Switch(name='S143')
    S144 = Switch(name='S144')
    S145 = Switch(name='S145')
    S146 = Switch(name='S146')
    S147 = Switch(name='S147')
    S148 = Switch(name='S148')
    S149 = Switch(name='S149')
    S150 = Switch(name='S150')
    S151 = Switch(name='S151')
    S152 = Switch(name='S152')
    S153 = Switch(name='S153')
    S154 = Switch(name='S154')
    S155 = Switch(name='S155')
    S156 = Switch(name='S156')
    S157 = Switch(name='S157')
    S158 = Switch(name='S158')
    S159 = Switch(name='S159')
    S160 = Switch(name='S160')
    S161 = Switch(name='S161')
    S162 = Switch(name='S162')
    S163 = Switch(name='S163')
    S164 = Switch(name='S164')
    S165 = Switch(name='S165')
    S166 = Switch(name='S166')
    S167 = Switch(name='S167')
    S168 = Switch(name='S168')
    S169 = Switch(name='S169')
    S170 = Switch(name='S170')
    S171 = Switch(name='S171')
    S172 = Switch(name='S172')
    S173 = Switch(name='S173')
    S174 = Switch(name='S174')
    S175 = Switch(name='S175')

    Slist = [S0, S1, S2, S3, S4, S5, S6, S7, S8, S9, S10, S11, S12, S13, S14, S15,
     S16, S17, S18, S19, S20, S21, S22, S23, S24, S25, S26, S27, S28, S29, S30, S31,
     S32, S33, S34, S35, S36, S37, S38, S39, S40, S41, S42, S43, S44, S45, S46, S47,
     S48, S49, S50, S51, S52, S53, S54, S55, S56, S57, S58, S59, S60, S61, S62, S63,
     S64, S65, S66, S67, S68, S69, S70, S71, S72, S73, S74, S75, S76, S77, S78, S79,
     S80, S81, S82, S83, S84, S85, S86, S87, S88, S89, S90, S91, S92, S93, S94, S95,
     S96, S97, S98, S99, S100, S101, S102, S103, S104, S105, S106, S107, S108, S109, S110, S111,
     S112, S113, S114, S115, S116, S117, S118, S119, S120, S121, S122, S123, S124, S125, S126, S127,
     S128, S129, S130, S131, S132, S133, S134, S135, S136, S137, S138, S139, S140, S141, S142, S143,
     S144, S145, S146, S147, S148, S149, S150, S151, S152, S153, S154, S155, S156, S157, S158, S159,
     S160, S161, S162, S163, S164, S165, S166, S167, S168, S169, S170, S171, S172, S173, S174, S175]

    tree_list0 = ['N3L_4'] + [[None]]*16

    def Slist_room(i):
        return Slist[i*16:i*16+16]
    def Slist_tree(i):
        return Slist[i * 16:i * 16 + 16] + Slist[i * 16 - 16:i * 16] + Slist[i * 16:i * 16 + 16]

    tree_list = ['AND', tree_list0, ['INF'] + [Tree.tree_list_BIN(16)]*2]

    T0 = Tree(tree_list=tree_list0,
              empty=True,
              name='T0',
              switches=Slist[0:16])
    T1 = Tree(tree_list=tree_list,
              empty=True,
              name='T1',
              switches=Slist_tree(1),
              cut_expression=True)
    T2 = Tree(tree_list=tree_list,
              empty=True,
              name='T2',
              switches=Slist_tree(2),
              cut_expression=True)
    T3 = Tree(tree_list=tree_list,
              empty=True,
              name='T3',
              switches=Slist_tree(3),
              cut_expression=True)
    T4 = Tree(tree_list=tree_list,
              empty=True,
              name='T4',
              switches=Slist_tree(4),
              cut_expression=True)
    T5 = Tree(tree_list=tree_list,
              empty=True,
              name='T5',
              switches=Slist_tree(5),
              cut_expression=True)
    T6 = Tree(tree_list=tree_list,
              empty=True,
              name='T6',
              switches=Slist_tree(6),
              cut_expression=True)
    T7 = Tree(tree_list=tree_list,
              empty=True,
              name='T7',
              switches=Slist_tree(7),
              cut_expression=True)
    T8 = Tree(tree_list=tree_list,
              empty=True,
              name='T8',
              switches=Slist_tree(8),
              cut_expression=True)
    T9 = Tree(tree_list=tree_list,
              empty=True,
              name='T9',
              switches=Slist_tree(9),
              cut_expression=True)
    T10 = Tree(tree_list=tree_list,
              empty=True,
              name='T10',
              switches = Slist_tree(10),
              cut_expression=True)

    n_column = 4
    ex = 4
    ey = 4
    dx = ex + 0.9
    dy = ey + 1.4
    def pos(i):
        return [(i%n_column)*dx, (i//n_column)*dy, ex, ey]

    if fast_solution_finding:
        possible_switches_values = [[1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1],
                                    [1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1],
                                    [1, 0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 0],
                                    [1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 1, 0, 1],
                                    [1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0],
                                    [0, 1, 1, 0, 1, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0],
                                    [0, 1, 1, 0, 1, 0, 0, 1, 0, 1, 1, 0, 1, 0, 0, 1],
                                    [0, 1, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 1, 0],
                                    [0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 0, 1, 0, 1],
                                    [0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0],
                                    [0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0]]
    else:
        possible_switches_values = None


    R0 = Room(name='R0',
              position=pos(0),
              switches_list=Slist_room(0),
              possible_switches_values=possible_switches_values)
    R1 = Room(name='R1',
              position=pos(1),
              switches_list=Slist_room(1),
              possible_switches_values=possible_switches_values)
    R2 = Room(name='R2',
              position=pos(2),
              switches_list=Slist_room(2),
              possible_switches_values=possible_switches_values)
    R3 = Room(name='R3',
              position=pos(3),
              switches_list=Slist_room(3),
              possible_switches_values=possible_switches_values)
    R4 = Room(name='R4',
              position=pos(4),
              switches_list=Slist_room(4),
              possible_switches_values=possible_switches_values)
    R5 = Room(name='R5',
              position=pos(5),
              switches_list=Slist_room(5),
              possible_switches_values=possible_switches_values)
    R6 = Room(name='R6',
              position=pos(6),
              switches_list=Slist_room(6),
              possible_switches_values=possible_switches_values)
    R7 = Room(name='R7',
              position=pos(7),
              switches_list=Slist_room(7),
              possible_switches_values=possible_switches_values)
    R8 = Room(name='R8',
              position=pos(8),
              switches_list=Slist_room(8),
              possible_switches_values=possible_switches_values)
    R9 = Room(name='R9',
              position=pos(9),
              switches_list=Slist_room(9),
              possible_switches_values=possible_switches_values)
    R10 = Room(name='R10',
               position=pos(10),
               switches_list=Slist_room(10),
              possible_switches_values=possible_switches_values)
    RE = Room(name='RE',
              position=pos(11),
    is_exit = True)  # E pour exit ou end

    rp = 0.515
    rdc = [1/2, 1/2]
    rac = [1/2, 1/2]

    D0 = Door(two_way=False,
                tree=T0,
                room_departure=R0,
                room_arrival=R1,
                relative_position=rp,
                relative_departure_coordinates=rdc,
                relative_arrival_coordinates=rac)
    D1 = Door(two_way=False,
                tree=T1,
                room_departure=R1,
                room_arrival=R2,
                relative_position=rp,
                relative_departure_coordinates=rdc,
                relative_arrival_coordinates=rac)
    D2 = Door(two_way=False,
                tree=T2,
                room_departure=R2,
                room_arrival=R3,
                relative_position=rp,
                relative_departure_coordinates=rdc,
                relative_arrival_coordinates=rac)
    D3 = Door(two_way=False,
                tree=T3,
                room_departure=R3,
                room_arrival=R4,
                relative_position=0.51,
                relative_departure_coordinates=[1/2, 1],
                relative_arrival_coordinates=[1/2, 0])
    D4 = Door(two_way=False,
                tree=T4,
                room_departure=R4,
                room_arrival=R5,
                relative_position=rp,
                relative_departure_coordinates=rdc,
                relative_arrival_coordinates=rac)
    D5 = Door(two_way=False,
                tree=T5,
                room_departure=R5,
                room_arrival=R6,
                relative_position=rp,
                relative_departure_coordinates=rdc,
                relative_arrival_coordinates=rac)
    D6 = Door(two_way=False,
                tree=T6,
                room_departure=R6,
                room_arrival=R7,
                relative_position=rp,
                relative_departure_coordinates=rdc,
                relative_arrival_coordinates=rac)
    D7 = Door(two_way=False,
                tree=T7,
                room_departure=R7,
                room_arrival=R8,
                relative_position=0.51,
                relative_departure_coordinates=[1/2, 1],
                relative_arrival_coordinates=[1/2, 0])
    D8 = Door(two_way=False,
                tree=T8,
                room_departure=R8,
                room_arrival=R9,
                relative_position=rp,
                relative_departure_coordinates=rdc,
                relative_arrival_coordinates=rac)
    D9 = Door(two_way=False,
                tree=T9,
                room_departure=R9,
                room_arrival=R10,
                relative_position=rp,
                relative_departure_coordinates=rdc,
                relative_arrival_coordinates=rac)
    D10 = Door(two_way=False,
                tree=T10,
                room_departure=R10,
                room_arrival=RE,
                relative_position=rp,
                relative_departure_coordinates=rdc,
                relative_arrival_coordinates=rac)

    l_color=Levels_colors_list.FROM_HUE(hu=0.75, sa=0.5, li=0.6)
    l_color.surrounding_color=Color.WHITE

    level = Maze(start_room_index=0,
                 exit_room_index=-1,
                 rooms_list=[R0, R1, R2, R3, R4, R5, R6, R7, R8, R9, R10] + [RE],
                 doors_list=[D0, D1, D2, D3, D4, D5, D6, D7, D8, D9, D10],
                 fastest_solution='S2 S3 S4 S5 S10 S11 S12 S13 D0 S17 S19 S21 S23 S24 S26 S28 S30 D1 S32 S34 S37 S39 S41 S43 S44 S46 D2 S49 S51 S52 S53 S58 S59 S60 S62 D3 S64 S67 S69 S70 S72 S75 S77 S78 D4 S81 S82 S84 S87 S88 S91 S93 S94 D5 S97 S98 S100 S103 S105 S106 S108 S111 D6 S112 S114 S118 S119 S120 S121 S125 S127 D7 S129 S131 S132 S134 S136 S138 S141 S143 D8 S144 S146 S148 S150 S153 S155 S157 S159 D9 S160 S161 S166 S167 S168 S169 S174 S175 D10',
                 level_color=l_color,
                 name='Combinatorics',
                 door_window_size=775,
                 keep_proportions=True,
                 y_separation=40,
                 border=40)

    return level
